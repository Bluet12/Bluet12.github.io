import{H as w,T as q}from"./TJmhZ0Py.js";import{_ as C,s as T,f as x,r as l,z as B,g as V,A as _,c as a,b as v,w as h,a as n,i as D,v as F,B as H,F as L,k as N,o as r,d as P,t as K}from"./CZumFkVr.js";import{u as M}from"./SMci92GT.js";const R={class:"search-container"},$={class:"search-results"},b={key:0},z={key:0},A=["onClick"],E={key:1,class:"no-results"},I={key:1,class:"no-results"},S={__name:"search",setup(U){const{getCollection:y}=M(),u=T(),c=x(),i=l([]),t=l(u.query.query||""),d=l([]),m=async()=>{try{i.value=await y("posts"),d.value=i.value}catch(e){console.error("게시물 로드 실패:",e)}},p=B(()=>{if(!t.value.trim())return[];const e=t.value.toLowerCase();return d.value.filter(s=>s.title.toLowerCase().includes(e))}),f=e=>{c.push(`/posts/${e}`)};return V(()=>{m()}),_(t,e=>{e&&c.push({query:{query:e}})},{immediate:!0}),_(()=>u.query.query,e=>{t.value=e||""}),(e,s)=>{const k=q,g=w;return r(),a("div",null,[v(g,null,{default:h(()=>[v(k,null,{default:h(()=>s[2]||(s[2]=[P("검색 결과 - 쁠로그")])),_:1})]),_:1}),n("div",R,[D(n("input",{"onUpdate:modelValue":s[0]||(s[0]=o=>t.value=o),type:"text",placeholder:"검색어를 입력하세요...",class:"search-input",onKeydown:s[1]||(s[1]=H((...o)=>e.searchpage&&e.searchpage(...o),["enter"]))},null,544),[[F,t.value]])]),n("div",$,[t.value.length>0?(r(),a("div",b,[p.value.length>0?(r(),a("div",z,[(r(!0),a(L,null,N(p.value,o=>(r(),a("div",{key:o.id,class:"post-card",onClick:j=>f(o.id)},[n("h3",null,K(o.title),1)],8,A))),128))])):(r(),a("p",E,"검색 결과가 없습니다."))])):(r(),a("p",I," 검색어를 입력하세요. "))])])}}},Q=C(S,[["__scopeId","data-v-7974cee5"]]);export{Q as default};
