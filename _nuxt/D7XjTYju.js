import{_ as y,s as k,u as v,r as x,n as I,c as d,a as o,F as R,x as S,b as C,w,e as M,o as r,y as $,t as f,d as b}from"./BO0BFLYY.js";const B={setup(){k(()=>{localStorage.getItem("createReload")==="true"&&(window.location.reload(),localStorage.removeItem("createReload")),localStorage.getItem("deleteReload")==="true"&&(window.location.reload(),localStorage.removeItem("deleteReload"))});const{getCollection:m,deleteCollection:e}=v(),i=x([]),s=I(),h=t=>{if(!t)return"";const _=new Date-t,a=Math.floor(_/1e3),n=Math.floor(a/60),p=Math.floor(n/60),g=Math.floor(p/24);return g>0?`${g}일 전`:p>0?`${p}시간 전`:n>0?`${n}분 전`:`${a}초 전`},u=async()=>{try{const t=await m("posts");i.value=t}catch(t){console.error("게시물 로딩 오류:",t)}},l=async t=>{try{await e("posts",t),alert("게시물이 삭제되었습니다!"),u(),s.push("/"),localStorage.setItem("deleteReload","true")}catch(c){alert("게시물 삭제 실패"),console.error(c)}};return u(),{posts:i,deletePost:l,timeAgo:h}}},N={class:"container"},D={class:"posts-list"},F={key:0,class:"no-posts"},P={key:1,class:"posts-container"},V={class:"post-header"},L={class:"post-content"},A=["onClick"];function E(m,e,i,s,h,u){const l=M;return r(),d("div",N,[o("div",D,[e[1]||(e[1]=o("h2",null,"게시물 목록",-1)),s.posts.length===0?(r(),d("div",F,e[0]||(e[0]=[o("p",null,"게시물이 없습니다.",-1)]))):(r(),d("div",P,[(r(!0),d(R,null,S(s.posts,({id:t,title:c,content:_,createdAt:a})=>(r(),$(l,{key:t,to:`/posts/${t}`,class:"post-card"},{default:w(()=>[o("div",V,[o("h3",null,f(c),1),o("small",null," 작성일: "+f(a?s.timeAgo(a):"알 수 없음"),1)]),o("p",L,f(_),1),o("button",{class:"delete-btn",onClick:n=>s.deletePost(t,n)},"삭제",8,A)]),_:2},1032,["to"]))),128))]))]),C(l,{class:"create-btn",to:"/create"},{default:w(()=>e[2]||(e[2]=[b("게시물 작성")])),_:1})])}const j=y(B,[["render",E],["__scopeId","data-v-6888fca3"]]);export{j as default};
