import{_ as y,i as k,m as x,r as I,p as R,c as d,a as o,F as S,y as b,b as C,w as p,e as M,o as l,z as $,t as u,d as B}from"./DKyaczvP.js";const N={class:"container"},D={class:"posts-list"},F={key:0,class:"no-posts"},V={key:1,class:"posts-container"},L={class:"post-header"},P={class:"post-content"},z=["onClick"],E={__name:"index",setup(T){k(()=>{localStorage.getItem("createReload")==="true"&&(window.location.reload(),localStorage.removeItem("createReload")),localStorage.getItem("deleteReload")==="true"&&(window.location.reload(),localStorage.removeItem("deleteReload"))});const{getCollection:f,deleteCollection:m}=x(),i=I([]),h=R(),g=e=>{if(!e)return"";const c=new Date-e,s=Math.floor(c/1e3),a=Math.floor(s/60),n=Math.floor(a/60),r=Math.floor(n/24);return r>0?`${r}일 전`:n>0?`${n}시간 전`:a>0?`${a}분 전`:`${s}초 전`},_=async()=>{try{const e=await f("posts");i.value=e}catch(e){console.error("게시물 로딩 오류:",e)}},v=async e=>{try{await m("posts",e),alert("게시물이 삭제되었습니다!"),_(),h.push("/"),localStorage.setItem("deleteReload","true")}catch(t){alert("게시물 삭제 실패"),console.error(t)}};return _(),(e,t)=>{const c=M;return l(),d("div",N,[o("div",D,[t[1]||(t[1]=o("h2",null,"게시물 목록",-1)),i.value.length===0?(l(),d("div",F,t[0]||(t[0]=[o("p",null,"게시물이 없습니다.",-1)]))):(l(),d("div",V,[(l(!0),d(S,null,b(i.value,({id:s,title:a,content:n,createdAt:r})=>(l(),$(c,{key:s,to:`/posts/${s}`,class:"post-card"},{default:p(()=>[o("div",L,[o("h3",null,u(a),1),o("small",null," 작성일: "+u(r?g(r):"알 수 없음"),1)]),o("p",P,u(n),1),o("button",{class:"delete-btn",onClick:w=>v(s,w)},"삭제",8,z)]),_:2},1032,["to"]))),128))]))]),C(c,{class:"create-btn",to:"/create"},{default:p(()=>t[2]||(t[2]=[B("게시물 작성")])),_:1})])}}},q=y(E,[["__scopeId","data-v-68f60aeb"]]);export{q as default};
