import{_ as k,r as x,f as y,g as w,c as i,a as o,F as g,j as M,b as $,w as p,e as C,o as c,k as b,t as u,i as B,d as N}from"./BLKQ2FKz.js";import{u as D}from"./DTiZrW7I.js";const F={class:"container"},V={class:"posts-list"},L={key:0,class:"no-posts"},P={key:1,class:"posts-container"},j={class:"post-header"},E={class:"post-content"},I=["onClick"],R={__name:"index",setup(S){const{getCollection:f,deleteCollection:h}=D(),d=x([]);y();const m=t=>{if(!t)return"";const l=new Date-t,e=Math.floor(l/1e3),n=Math.floor(e/60),r=Math.floor(n/60),a=Math.floor(r/24);return a>0?`${a}일 전`:r>0?`${r}시간 전`:n>0?`${n}분 전`:`${e}초 전`},_=async()=>{try{const t=await f("posts");d.value=t}catch(t){console.error("게시물 로딩 오류:",t)}},v=async t=>{try{await h("posts",t),alert("게시물이 삭제되었습니다!"),_()}catch(s){alert("게시물 삭제 실패"),console.error(s)}};return w(()=>{_()}),(t,s)=>{const l=C;return c(),i("div",F,[o("div",V,[s[1]||(s[1]=o("h2",null,"게시물 목록",-1)),d.value.length===0?(c(),i("div",L,s[0]||(s[0]=[o("p",null,"게시물이 없습니다.",-1)]))):(c(),i("div",P,[(c(!0),i(g,null,M(d.value,({id:e,title:n,content:r,createdAt:a})=>(c(),b(l,{key:e,to:`/posts/${e}`,class:"post-card"},{default:p(()=>[o("div",j,[o("h3",null,u(n),1),o("small",null," 작성일: "+u(a?m(a):"알 수 없음"),1)]),o("p",E,u(r),1),o("button",{class:"delete-btn",onClick:B(T=>v(e),["prevent"])},"삭제",8,I)]),_:2},1032,["to"]))),128))]))]),$(l,{class:"create-btn",to:"/create"},{default:p(()=>s[2]||(s[2]=[N("게시물 작성")])),_:1})])}}},A=k(R,[["__scopeId","data-v-5077e217"]]);export{A as default};
