import{_ as k,r as w,c as a,a as o,F as x,i as g,b as v,w as y,e as $,o as l,t as p,d as C}from"./pWMLlUBb.js";import{u as D}from"./QFn75pa5.js";const b={setup(){const{getCollection:f,deleteCollection:s}=D(),d=w([]),n=t=>{if(!t)return"";const _=new Date-new Date(t.seconds*1e3),c=Math.floor(_/1e3),r=Math.floor(c/60),i=Math.floor(r/60),m=Math.floor(i/24);return m>0?`${m}일 전`:i>0?`${i}시간 전`:r>0?`${r}분 전`:`${c}초 전`},u=async()=>{try{const t=await f("posts");d.value=t.map(e=>({...e,createdAt:e.createdAt?e.createdAt.toDate():null}))}catch(t){console.error("게시물 로딩 오류:",t)}},h=async t=>{try{await s("posts",t),alert("게시물이 삭제되었습니다!"),u()}catch(e){alert("게시물 삭제 실패"),console.error(e)}};return u(),{posts:d,deletePost:h,timeAgo:n}}},A={class:"container"},M={class:"posts-list"},N={key:0,class:"no-posts"},B={key:1,class:"posts-container"},F={class:"post-header"},P=["onClick"];function V(f,s,d,n,u,h){const t=$;return l(),a("div",A,[o("div",M,[s[1]||(s[1]=o("h2",null,"게시물 목록",-1)),n.posts.length===0?(l(),a("div",N,s[0]||(s[0]=[o("p",null,"게시물이 없습니다.",-1)]))):(l(),a("div",B,[(l(!0),a(x,null,g(n.posts,({id:e,title:_,content:c,createdAt:r})=>(l(),a("div",{class:"post-card",key:e},[o("div",F,[v(t,{to:`/posts/${e}`},{default:y(()=>[o("h3",null,p(_),1)]),_:2},1032,["to"]),o("small",null," 작성일: "+p(r?n.timeAgo(r):"알 수 없음"),1)]),o("p",null,p(c),1),o("button",{class:"delete-btn",onClick:i=>n.deletePost(e)},"삭제",8,P)]))),128))]))]),v(t,{class:"create-btn",to:"/create"},{default:y(()=>s[2]||(s[2]=[C("게시물 작성")])),_:1})])}const I=k(b,[["render",V],["__scopeId","data-v-794526d5"]]);export{I as default};
