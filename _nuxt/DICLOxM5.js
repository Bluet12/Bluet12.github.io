import{_ as g,r as f,f as y,g as w,c,a as s,F as x,k as M,o as l,l as $,w as C,t as d,j as B,e as D}from"./CZumFkVr.js";import{u as F}from"./SMci92GT.js";const L={class:"container"},b={class:"posts-list"},I={key:0,class:"no-posts"},N={key:1,class:"posts-container"},P={class:"post-header"},S={class:"post-content"},j=["onClick"],E={__name:"index",setup(R){const{getCollection:h,deleteCollection:m}=F(),i=f([]);y();const _=f(!1),v=t=>{if(!t)return"";const u=new Date-t,e=Math.floor(u/1e3),n=Math.floor(e/60),r=Math.floor(n/60),a=Math.floor(r/24);return a>0?`${a}일 전`:r>0?`${r}시간 전`:n>0?`${n}분 전`:`${e}초 전`},p=async()=>{try{const t=await h("posts");i.value=t}catch(t){console.error("게시물 로딩 오류:",t)}},k=async t=>{try{await m("posts",t),alert("게시물이 삭제되었습니다!"),p()}catch(o){alert("게시물 삭제 실패"),console.error(o)}};return w(()=>{p(),localStorage.getItem("Login")?_.value=!0:_.value=!1}),(t,o)=>{const u=D;return l(),c("div",L,[s("div",b,[o[1]||(o[1]=s("h2",null,"게시물 목록",-1)),i.value.length===0?(l(),c("div",I,o[0]||(o[0]=[s("p",null,"게시물이 없습니다.",-1)]))):(l(),c("div",N,[(l(!0),c(x,null,M(i.value,({id:e,title:n,content:r,createdAt:a})=>(l(),$(u,{key:e,to:`/posts/${e}`,class:"post-card"},{default:C(()=>[s("div",P,[s("h3",null,d(n),1),s("small",null," 작성일: "+d(a?v(a):"알 수 없음"),1)]),s("p",S,d(r),1),s("button",{class:"delete-btn",onClick:B(V=>k(e),["prevent"])},"삭제",8,j)]),_:2},1032,["to"]))),128))]))])])}}},A=g(E,[["__scopeId","data-v-4ad93d05"]]);export{A as default};
